{% extends "base.html" %}
{% load static %}
{% block title %}{{ player.Name }}{% endblock %}
{% block content %}
<div class="main-nav">
    <div class="grid-container">
        <div class="data-column">

            <div class="main-nav-header">
                <h1>{{ player.Name }}</h1>
            </div>

            <div class="main-nav-body">
                <br>
                <h3>Current team: {{ player.Club }}</h3><br>
                <h3>Country: {{ player.Nacionality }}</h3>
                <h3>League: {{ player.League }}</h3>
                <h3>Contract until: {{ player.End_contract }}</h3>
                <h3>Wage: {{ player.Salary }} $</h3>
                <br>
                <h3>Positions:</h3>
                    <ul>
                        {% for position in player.Pos.all %}
                            <li>{{ position }}</li>
                        {% endfor %}
                    </ul>    
                <h3>Leg: {{ player.Pref_foot}} </h3>
                <h3>Age: {{ player.Age }}</h3>
                
            
                <h3>Height: {{ player.Height }} cm</h3>
                <h3>Weight: {{ player.Weight }} kg</h3><br>

            </div>
        </div>

        <div class="image-column">
            <!-- Field image container -->
            <div class="Football-field-container">
                <img src="{% static 'smartscore/images/field.jpg' %}" alt="Football Field">
                <!-- Player position dots -->
                {% for dot_position in dot_positions %}
                    <div class="player-position-dot" style="left: {{ dot_position.left }}px; top: {{ dot_position.top }}px;"></div>
                {% endfor %}
            </div>
        </div>

        <div class="chart-column">
                <canvas id="radarChart" width="400" height="400"></canvas>
                <h3>Player stats: </h3>
                <ul>
                    <li>Goal: {{ stats.Goal }}</li>
                    <li>Curr ability: {{ stats.CAbil }}</li>
                    <li>Poss lost: {{ stats.Poss_lost_90 }}</li>
                    <li>Penalty saved: {{ stats.Penalty_sav }}</li>
                </ul>
                <ul id="avg_stats">
                    
                </ul>
        </div>

        <script>
            var radarData = {
                labels: ["Goles", "Curr ability", "Pass lost, Penalty saved"],
                datasets: [{
                    label: "{{ player.Name }}",
                    backgroundColor: "#FFCC80",
                    borderColor: "#FFA500",
                    pointBackgroundColor: "#FFA500",
                    pointBorderColor: "#FFA500",
                    pointHoverBackgroundColor: "#FFA500",
                    pointHoverBorderColor: "rgba(179,181,198,1)",
                    data: [{{ stats.Goal }}, {{ stats.CAbil }}, {{ stats.Poss_lost_90 }}, {{ stats.Penalty_sav }}]
                }, {
                    label: "Avg possition Stats",
                    backgroundColor: "#98FB98",
                    borderColor: "#FFA500",
                    pointBackgroundColor: "#98FB98",
                    pointBorderColor: "#FFA500",
                    pointHoverBackgroundColor: "#FFA500",
                    pointHoverBorderColor: "rgba(179,181,198,1)",
                    data: [{{ avg_stats.Goal }}, {{ avg_stats.CAbil }}, {{ avg_stats.Poss_lost_90 }}, {{ avg_stats.Penalty_sav}}]
                }]
            };

        
            var radarOptions = {
                scale: {
                    ticks: {
                        beginAtZero: true,
                        max: 10
                    }
                }
            };
        
            var radarChartCanvas = document.getElementById("radarChart").getContext("2d");
            var myRadarChart = new Chart(radarChartCanvas, {
                type: 'radar',
                data: radarData,
                options: radarOptions
            });
        </script>

    </div>

    <script src="{% static 'js_content/player_detail.js' %}"></script>


</div>
{% endblock %}
